<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns:pro="http://www.liquibase.org/xml/ns/pro"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd
http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.1.xsd">

    <changeSet id="001" author="anton">

        <createTable tableName="shop">
            <column type="int" name="shop_id" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column type="varchar(50)" name="shop_name"/>
            <column type="varchar(50)" name="shop_address"/>
            <column type="bigint" name="shop_phone"/>
            <column type="int" name="is_city"/>
        </createTable>

        <createTable tableName="seller">
            <column name="seller_id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="seller_name" type="varchar">
                <constraints nullable="false"/>
            </column>
            <column name="seller_phone" type="bigint"/>
        </createTable>

        <createTable tableName="shop_seller_link">
            <column name="link_id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column type="int" name = "shop_id">
                <constraints nullable="false" foreignKeyName="link_shop_id" references="shop(shop_id)"/>
            </column>
            <column type="int" name = "seller_id">
                <constraints nullable="false" foreignKeyName="link_seller_id" references="seller(seller_id)"/>
            </column>
        </createTable>

        <createTable tableName="product_category">
            <column type="int" name="category_id" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column type="varchar(50)" name="category_name">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="maker">
            <column name="maker_id" type="int" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="maker_name" type="varchar(50)"/>
            <column name="maker_contacts" type="varchar(500)"/>
            <column name="maker_description" type="varchar(500)"/>
        </createTable>

        <createTable tableName="product">
            <column name="product_id" type="int" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="product_name" type="varchar(50)"/>
            <column name="category_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fk_category_id" references="product_category(category_id)"/>
            </column>
            <column name="maker_id" type="int">
                <constraints foreignKeyName="fk_maker_id" references="maker(maker_id)"/>
            </column>
            <column name="product_order" type="int"/>
        </createTable>

        <createTable tableName="shift">
            <column name="shift_id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column type="bigint" name="shop_id">
                <constraints nullable="false" foreignKeyName="fk_shift_shop_id" references="shop(shop_id)"/>
            </column>
            <column name="seller_id" type="bigint">
                <constraints foreignKeyName="fk_seller_id" references="seller(seller_id)"/>
            </column>
            <column name="shift_begin" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="shift_ends" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="cash_begin" type="double"/>
            <column name="cash_end" type="double"/>
        </createTable>

        <createTable tableName="product_report">
            <column name="product_report_id" type="int" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column type="bigint" name="shift_id">
                <constraints nullable="false" foreignKeyName="fk_shift_id" references="shift(shift_id)"/>
            </column>
            <column type="bigint" name="product_id">
                <constraints nullable="false" foreignKeyName="fk_product_id" references="product(product_id)"/>
            </column>
            <column type="double" name="price_buy"/>
            <column type="double" name="price_sell"/>
            <column type="double" name="remains_last"/>
            <column type="double" name="coming"/>
            <column type="double" name="remains_current"/>
            <column type="double" name="sum_current"/>
            <column type="double" name="gross_profit"/>
            <column type="double" name="notebook_value"/>
            <column type="double" name="balance"/>
        </createTable>

        <createTable tableName="expense">
            <column name="expense_id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column type="int" name="shift_id">
                <constraints nullable="false" foreignKeyName="fk_exp_shift_id" references="shift(shift_id)"/>
            </column>
            <column name="expense_type" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="expense_name" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column type="double" name="expense_sum"/>
            <column type="varchar(50)" name="expense_category"/>
        </createTable>

    </changeSet>
</databaseChangeLog>